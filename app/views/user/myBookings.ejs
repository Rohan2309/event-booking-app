<!DOCTYPE html>
<html>
<head>
  <title>My Bookings – EventBook</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    .status-pending { color: orange; font-weight: 600; }
    .status-confirmed { color: green; font-weight: 600; }
    .status-cancelled { color: red; font-weight: 600; }
  </style>
</head>
<body>

<%- include('../partials/header') %>

<div class="container py-4">

  <h2 class="fw-bold mb-4">My Bookings</h2>

  <% if (bookings.length === 0) { %>
    <div class="alert alert-info">No bookings yet.</div>
  <% } else { %>

    <table class="table table-bordered">
      <thead class="table-light">
        <tr>
          <th>Event</th>
          <th>Date</th>
          <th>Amount</th>
          <th>Status</th>
        </tr>
      </thead>

      <tbody>
        <% bookings.forEach(b => { %>
          <tr>
            <td><%= b.event ? b.event.title : "Deleted Event" %></td>
            <td><%= b.event ? new Date(b.event.date).toLocaleDateString() : "" %></td>
            <td>₹<%= b.totalAmount  %></td>
            <td>
              <% if (b.status === "pending") { %>
                <span class="status-pending">Pending</span>
              <% } else if (b.status === "confirmed") { %>
                <span class="status-confirmed">Confirmed</span>
              <% } else if (b.status === "cancelled") { %>
                <span class="status-cancelled">Cancelled</span>
              <% } %>
            </td>
          </tr>
        <% }) %>
      </tbody>
    </table>

  <% } %>

</div>

<%- include('../partials/footer') %>

</body>
</html>
